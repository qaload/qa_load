[{"apiVersion":"influxdata.com/v2alpha1","kind":"Dashboard","metadata":{"name":"annoying-feynman-138001"},"spec":{"charts":[{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"2","name":"y","scale":"linear","suffix":" rps"}],"colors":[{"id":"519954ff-d935-42f0-b016-f2dacd0614d9","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"a8672357-f006-4aa4-a7d3-0e30229cb218","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"e5020d9e-cbf3-47ed-b8a4-e9def5c6e9ba","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Query Requests","position":"overlaid","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"http_api_requests_total\")\n  |> filter(fn: (r) => r.path == \"/api/v2/query\")\n  |> derivative(unit: 1s, nonNegative: true)"}],"staticLegend":{},"width":4,"xCol":"_time","yCol":"_value"},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"2","label":"Bytes","name":"y","scale":"linear"}],"colors":[{"id":"70051436-c10c-424e-a6f6-f6454b26e42d","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"b0e59617-4cc0-46b4-b92d-a601d731362e","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"193a93b0-e49e-43f0-8f2d-204a46f09027","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"generateYAxisTicks":["yTickStart","yTickStep"],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Memory Allocations (Bytes)","position":"overlaid","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"go_memstats_alloc_bytes_total\")\n  |> derivative(unit: 1s, nonNegative: true)"}],"shade":true,"staticLegend":{},"width":4,"yPos":3,"yTickStep":104857600},{"colors":[{"id":"base","name":"white","type":"text","hex":"#ffffff"}],"fieldOptions":[{"displayName":"_field","fieldName":"_field","visible":true},{"displayName":"_measurement","fieldName":"_measurement","visible":true},{"displayName":"_start","fieldName":"_start","visible":true},{"displayName":"_stop","fieldName":"_stop","visible":true},{"displayName":"_time","fieldName":"_time","visible":true},{"displayName":"_value","fieldName":"_value","visible":true},{"displayName":"host","fieldName":"host","visible":true},{"displayName":"id","fieldName":"id","visible":true},{"displayName":"url","fieldName":"url","visible":true},{"displayName":"Host","fieldName":"Host","visible":true},{"displayName":"URL","fieldName":"URL","visible":true},{"displayName":"Hours","fieldName":"Hours","visible":true},{"displayName":"Instance ID","fieldName":"Instance ID","visible":true},{"displayName":"Uptime Hours","fieldName":"Uptime Hours","visible":true}],"height":2,"kind":"Table","name":"Uptime","queries":[{"query":"import \"math\"\n\nfrom(bucket: \"oss_metrics\")\n    |> range(start:v.timeRangeStart, stop: v.timeRangeStop)\n    |> filter(fn: (r) =>r._measurement == \"influxdb_uptime_seconds\")\n    |> filter(fn:(r) => r._field == \"gauge\")\n    |> last()\n    |> drop(columns:[\n        \"_start\",\n        \"_stop\",\n        \"_time\",\n        \"_measurement\",\n        \"_field\",\n        \"url\",\n    ])\n    |> map(fn: (r)=> ({r with _value: math.round(x: float(v: r._value) / 60.0 / 60.0* 100.0) / 100.0}))\n    |> group()\n    |> rename(columns: {_value: \"Uptime Hours\", id: \"Instance ID\"})"}],"staticLegend":{},"tableOptions":{"verticalTimeAxis":true},"timeFormat":"YYYY-MM-DD HH:mm:ss","width":4,"yPos":6},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Organizations","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_organizations_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Orgs\"})"}],"staticLegend":{},"width":2,"yPos":8},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Dashboards","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_dashboards_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Dashboards\"})"}],"staticLegend":{},"width":2,"yPos":9},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Buckets (Including System)","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_buckets_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Buckets\"})"}],"staticLegend":{},"width":2,"xPos":2,"yPos":8},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"2","name":"y","scale":"linear"}],"colors":[{"id":"2df496c5-614d-4d42-8590-0bf106d711e7","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"817fd4b1-56fd-4687-a93a-b8659677796b","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"64e7fa3e-3633-4992-8296-2f8fe8ea84c7","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Local Object Store Reads","position":"overlaid","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"boltdb_reads_total\")\n  |> derivative(unit: 1s, nonNegative: true)\n  |> drop(columns: [\"url\", \"_measurement\"])"}],"staticLegend":{},"width":4,"xPos":4},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"2","name":"y","scale":"linear","suffix":" %"}],"colors":[{"id":"70051436-c10c-424e-a6f6-f6454b26e42d","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"b0e59617-4cc0-46b4-b92d-a601d731362e","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"193a93b0-e49e-43f0-8f2d-204a46f09027","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Memory Usage (%)","position":"overlaid","queries":[{"query":"bytes_used = from(bucket: \"oss_metrics\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |> filter(fn: (r) => r._measurement == \"go_memstats_alloc_bytes\")\n    |> drop(columns: [\"_start\", \"_stop\"])\n\ntotal_bytes = from(bucket: \"oss_metrics\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |> filter(fn: (r) => r._measurement == \"go_memstats_sys_bytes\")\n    |> drop(columns: [\"_start\", \"_stop\"])\n\njoin(tables: {key1: bytes_used, key2: total_bytes}, on: [\"_time\"], method: \"inner\")\n    |> map(\n        fn: (r) => ({\n            _time: r._time,\n            host: r.host,\n            _value: float(v: r._value_key1) / float(v: r._value_key2) * 100.0,\n            _field: \"Memory Usage Percent\",\n        }),\n    )"}],"shade":true,"staticLegend":{},"width":4,"xPos":4,"yPos":3},{"colors":[{"name":"laser","type":"text","hex":"#00C9FF"}],"fieldOptions":[{"displayName":"Architecture","fieldName":"Architecture","visible":true},{"displayName":"Build Date","fieldName":"Build Date","visible":true},{"displayName":"Github Commit","fieldName":"Github Commit","visible":true},{"displayName":"CPUs","fieldName":"CPUs","visible":true},{"displayName":"OS","fieldName":"OS","visible":true},{"displayName":"Version","fieldName":"Version","visible":true},{"displayName":"_start","fieldName":"_start","visible":true},{"displayName":"_stop","fieldName":"_stop","visible":true},{"displayName":"_time","fieldName":"_time","visible":true},{"displayName":"_value","fieldName":"_value","visible":true},{"displayName":"_field","fieldName":"_field","visible":true},{"displayName":"_measurement","fieldName":"_measurement","visible":true},{"displayName":"host","fieldName":"host","visible":true},{"displayName":"url","fieldName":"url","visible":true},{"displayName":"le","fieldName":"le","visible":true},{"displayName":"method","fieldName":"method","visible":true},{"displayName":"arch","fieldName":"arch","visible":true},{"displayName":"build_date","fieldName":"build_date","visible":true},{"displayName":"commit","fieldName":"commit","visible":true},{"displayName":"cpus","fieldName":"cpus","visible":true},{"displayName":"os","fieldName":"os","visible":true},{"displayName":"version","fieldName":"version","visible":true},{"displayName":"Host","fieldName":"Host","visible":true},{"displayName":"URL","fieldName":"URL","visible":true}],"height":2,"kind":"Table","name":"Instance Info","note":"This cell gives you information about your running instance of InfluxDB 2, but you probably already knew that.","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_info\")\n  |> last()\n  |> group()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_field\",\"_value\",\"_measurement\"])\n  |> rename(columns: {arch: \"Architecture\", build_date: \"Build Date\", commit: \"Github Commit\", cpus: \"CPUs\", os: \"OS\", version: \"Version\"})"}],"staticLegend":{},"tableOptions":{"fixFirstColumn":true,"verticalTimeAxis":true},"timeFormat":"YYYY-MM-DD HH:mm:ss","width":8,"xPos":4,"yPos":6},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Users","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_users_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Users\"})"}],"staticLegend":{},"width":2,"xPos":4,"yPos":8},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Scrapers","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_scrapers_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Scrapers\"})"}],"staticLegend":{},"width":2,"xPos":4,"yPos":9},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Tokens","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_tokens_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Tokens\"})"}],"staticLegend":{},"width":2,"xPos":6,"yPos":8},{"colors":[{"id":"base","name":"laser","type":"text","hex":"#00C9FF"}],"decimalPlaces":0,"height":1,"kind":"Single_Stat","name":"Telegraf Configs","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"influxdb_telegrafs_total\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Telegraf Configs\"})"}],"staticLegend":{},"width":2,"xPos":6,"yPos":9},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"2","name":"y","scale":"linear"}],"colors":[{"id":"2df496c5-614d-4d42-8590-0bf106d711e7","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"817fd4b1-56fd-4687-a93a-b8659677796b","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"64e7fa3e-3633-4992-8296-2f8fe8ea84c7","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Local Object Store Writes","position":"overlaid","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"boltdb_writes_total\")\n  |> derivative(unit: 1s, nonNegative: true)\n  |> drop(columns: [\"url\", \"_measurement\"])"}],"staticLegend":{},"width":4,"xPos":8},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"10","name":"y","scale":"linear"}],"colors":[{"id":"1e40d1f8-5ef8-4de8-b6d3-8b72ef56edde","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"f0321a25-31ce-43a6-8411-b894293ace66","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"d2f7a375-d96a-444b-ab7e-f65f2ed9d57d","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"line","height":3,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Memory Allocs & Frees (Bytes)","position":"overlaid","queries":[{"query":"from(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"go_memstats_mallocs_total\" or r._measurement == \"go_memstats_frees_total\")\n  |> derivative(unit: 1s, nonNegative: false)"}],"staticLegend":{},"width":4,"xPos":8,"yPos":3},{"colors":[{"id":"base","name":"white","type":"text","hex":"#ffffff"}],"fieldOptions":[{"displayName":"_time","fieldName":"_time","visible":true},{"displayName":"_value","fieldName":"_value","visible":true},{"displayName":"_field","fieldName":"_field","visible":true},{"displayName":"_measurement","fieldName":"_measurement","visible":true},{"displayName":"status","fieldName":"status","visible":true},{"displayName":"task_type","fieldName":"task_type","visible":true},{"displayName":"# of Task Runs","fieldName":"# of Task Runs","visible":true},{"displayName":"Host","fieldName":"Host","visible":true}],"height":2,"kind":"Table","name":"Successful Task Runs","queries":[{"query":"import \"csv\"\n\nfrom(bucket: \"oss_metrics\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"task_executor_total_runs_complete\")\n  |> filter(fn: (r) => r.status == \"success\")\n  |> filter(fn: (r) => r.task_type == \"system\")\n  |> last()\n  |> drop(columns: [\"_start\", \"_stop\",\"_time\",\"_measurement\", \"_field\", \"url\"])\n  |> group()\n  |> rename(columns: {_value: \"# of Task Runs\"})"}],"staticLegend":{},"tableOptions":{"verticalTimeAxis":true},"timeFormat":"YYYY-MM-DD HH:mm:ss","width":4,"xPos":8,"yPos":8}],"description":"A collection of useful visualizations for monitoring your local InfluxDB 2.0 OSS instance.","name":"InfluxDB OSS Metrics"}}]